<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li:not(:nth-child(6)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(4) > ul > li:nth-child(1) > ul > li:nth-child(6) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(4) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(4) > ul > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(4) > ul > li:nth-child(1) > ul > li:nth-child(6) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(6) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="shortcut icon" type="image/png" href="/images/mod_logo_red_purple.png"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Part 6 - What is Patching? | V Rising Mod Wiki</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Part 6 - What is Patching?" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Information about mods for the game V Rising: How to setup on Windows / Linux. Developer information. How to build, debug, and publish your mods." /> <meta property="og:description" content="Information about mods for the game V Rising: How to setup on Windows / Linux. Developer information. How to build, debug, and publish your mods." /> <link rel="canonical" href="https://vrising.wiki/dev/tutorials/SampleTutorial/06_sample_patch.html" /> <meta property="og:url" content="https://vrising.wiki/dev/tutorials/SampleTutorial/06_sample_patch.html" /> <meta property="og:site_name" content="V Rising Mod Wiki" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Part 6 - What is Patching?" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Information about mods for the game V Rising: How to setup on Windows / Linux. Developer information. How to build, debug, and publish your mods.","headline":"Part 6 - What is Patching?","url":"https://vrising.wiki/dev/tutorials/SampleTutorial/06_sample_patch.html"}</script> <!-- End Jekyll SEO tag --> <script defer data-domain="wiki.vrisingmods.com" src="https://traffic.dev.deca.gg/js/script.js"></script> <meta property="og:description" content="Information about mods for the game V Rising: How to setup on Windows / Linux. Developer information. How to build, debug, and publish your mods."> <meta property="og:image" content="/images/mod_logo_red_purple.png"> <meta property="twitter:image" content="/images/mod_logo_red_purple.png"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"><div class="logo"> <img src="/images/mod_logo_red_purple.png" /> <div class="title"> <span class="top">V Rising</span> <span class="bottom">Mod Wiki</span> </div> </div></a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">V Rising Mod Wiki</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in For Developers category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/dev/" class="nav-list-link">For Developers</a><ul class="nav-list"><li class="nav-list-item"><a href="/dev/migration_guide.html" class="nav-list-link">Migration Guide for 1.0 Update</a></li><li class="nav-list-item"><a href="/dev/open%20source.html" class="nav-list-link">Open Source Mods</a></li><li class="nav-list-item"><a href="/dev/resources.html" class="nav-list-link">Resources</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tutorials category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/dev/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Sample Introduction category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/dev/tutorials/tutorial_sample.html" class="nav-list-link">Sample Introduction</a><ul class="nav-list"><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/01_sample_setup.html" class="nav-list-link">Part 1 - Setup</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/02_sample_plugin.html" class="nav-list-link">Part 2 - What is Plugin?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/03_sample_ecs.html" class="nav-list-link">Part 3 - What is ECSExtensions?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/04_sample_config.html" class="nav-list-link">Part 4 - What are Configs?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/05_sample_core.html" class="nav-list-link">Part 5 - What is Core?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/06_sample_patch.html" class="nav-list-link">Part 6 - What is Patching?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/07_sample_services.html" class="nav-list-link">Part 7 - What are Services?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/08_sample_commands.html" class="nav-list-link">Part 8 - What are Commands?</a></li><li class="nav-list-item"><a href="/dev/tutorials/SampleTutorial/09_sample_build.html" class="nav-list-link">Part 9 - How to Build</a></li></ul></li></ul></li><li class="nav-list-item"><a href="/dev/upload_to_thunderstore.html" class="nav-list-link">Uploading To Thunderstore</a></li><li class="nav-list-item"><a href="/dev/template.html" class="nav-list-link">dotnet new vrisingmod</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in For Users category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/user/" class="nav-list-link">For Users</a><ul class="nav-list"><li class="nav-list-item"><a href="/user/bepinex_install.html" class="nav-list-link">Manual BepInEx Installation</a></li><li class="nav-list-item"><a href="/user/Mod_Install.html" class="nav-list-link">Manual Mod Installation</a></li><li class="nav-list-item"><a href="/user/Using_Server_Mods.html" class="nav-list-link">Using Server Mods in-game</a></li><li class="nav-list-item"><a href="/user/client_rollback.html" class="nav-list-link">How to rollback client</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Prefabs category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/prefabs/" class="nav-list-link">Prefabs</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/editing.html" class="nav-list-link">Wiki Editing 🤔</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://vrisingmods.com/discord" class="nav-list-link external" > Join our Discord </a> </li><li class="nav-list-item external"> <a href="https://github.com/crimsonmods/vrising-modding/new/main/dev?filename=FILE_NAME.md&value=---%0Atitle%3A%20YOUR%20TITLE%20HERE%20%28i.e.%20page%20title%29%0Aparent%3A%20PARENT%20DOC%20TITLE%20%28e.g.%20For%20Developers%29%0A---%0A%0A1.%20Update%20the%20FILE_NAME%20and%20path%20above%20the%20editor%0A2.%20Set%20the%20title%20and%20parent%20at%20top%20of%20this%20doc%20%0A3.%20You%20can%20find%20more%20info%3A%20https%3A%2F%2Fjust-the-docs.github.io%2Fjust-the-docs%2Fdocs%2Fnavigation-structure%2F%20%0A4.%20After%20you%27re%20done%2C%20scroll%20down%20and%20please%20start%20a%20pull%20request%20%F0%9F%98%8A%0A5.%20Replace%20these%20instructions%20with%20your%20wiki%20content%20in%20markdown" class="nav-list-link external" > ➕ Add new page </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search V Rising Mod Wiki" aria-label="Search V Rising Mod Wiki" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://vrisingmods.com/discord" class="site-button" > Join our Discord </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/dev/">For Developers</a></li> <li class="breadcrumb-nav-list-item"><a href="/dev/tutorials/">Tutorials</a></li> <li class="breadcrumb-nav-list-item"><a href="/dev/tutorials/tutorial_sample.html">Sample Introduction</a></li> <li class="breadcrumb-nav-list-item"><span>Part 6 - What is Patching?</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="what-is-patching"> <a href="#what-is-patching" class="anchor-heading" aria-labelledby="what-is-patching"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is Patching? </h1> <p>Okay. We are now on to the part where this gets complicated. Patching is the act of modifying the game’s code. This is done by using a tool called <a href="https://harmony.pardeike.net/">Harmony</a> to modify the IL (Intermediate Language) of the game. This was mentioned in the <a href="01_sample_intro.md">Introduction</a> but is worth going into more detail because it is the core of modding the game’s Systems.</p> <p>We left off the last chapter wondering where in the game we could call our Initialize method. Well we know a System in the game that will be called every time the game has finished loading. We are going to Patch that system. Open <code class="language-plaintext highlighter-rouge">Patches/InitializationPatch.cs</code>.</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="nf">HarmonyPatch</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">SpawnTeamSystem_OnPersistenceLoad</span><span class="p">),</span> <span class="k">nameof</span><span class="p">(</span><span class="n">SpawnTeamSystem_OnPersistenceLoad</span><span class="p">.</span><span class="n">OnUpdate</span><span class="p">))]</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">InitializationPatch</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">HarmonyPostfix</span><span class="p">]</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">OneShot_AfterLoad_InitializationPatch</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Core</span><span class="p">.</span><span class="nf">Initialize</span><span class="p">();</span>
        <span class="n">Plugin</span><span class="p">.</span><span class="n">Harmony</span><span class="p">.</span><span class="nf">Unpatch</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">SpawnTeamSystem_OnPersistenceLoad</span><span class="p">).</span><span class="nf">GetMethod</span><span class="p">(</span><span class="s">"OnUpdate"</span><span class="p">),</span> <span class="k">typeof</span><span class="p">(</span><span class="n">InitializationPatch</span><span class="p">).</span><span class="nf">GetMethod</span><span class="p">(</span><span class="s">"OneShot_AfterLoad_InitializationPatch"</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The first line there is the Attribute that tells Harmony what to patch. The first parameter is the type of the method we want to patch. The second parameter is the name of the method we want to patch. In this case we want to patch the <code class="language-plaintext highlighter-rouge">OnUpdate</code> method of the <code class="language-plaintext highlighter-rouge">SpawnTeamSystem_OnPersistenceLoad</code> class.</p> <p><em>Note: Your class must be static for Harmony to patch it.</em></p> <p>Above the method we have a <code class="language-plaintext highlighter-rouge">HarmonyPostfix</code> attribute. This is a special attribute that tells Harmony to run our method after the original method has finished. This is important because we want to make sure that our Initialize method has been called after the System has loaded.</p> <p>Then we call our Core.Initialize method knowing that the game has finished loading.</p> <p>And because this is a one-shot patch, we need to unpatch it after we have called it. This is done by using the <code class="language-plaintext highlighter-rouge">Unpatch</code> method of the Harmony instance. The first parameter is the type of the method we want to unpatch. The second parameter is the name of the method we want to unpatch. In this case we want to unpatch the <code class="language-plaintext highlighter-rouge">OnUpdate</code> method of the <code class="language-plaintext highlighter-rouge">SpawnTeamSystem_OnPersistenceLoad</code> class.</p> <h2 id="types-of-patches"> <a href="#types-of-patches" class="anchor-heading" aria-labelledby="types-of-patches"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Types of Patches </h2> <ol> <li> <p>Prefix - Runs before the original method</p> <p><code class="language-plaintext highlighter-rouge">[HarmonyPrefix]</code></p> <p>These patches can prevent the original method from running by returning false.</p> </li> <li> <p>Postfix - Runs after the original method</p> <p><code class="language-plaintext highlighter-rouge">[HarmonyPostfix]</code></p> <p>These patches are commonly used to modify the return value or perform actions after the original method.</p> </li> <li> <p>Transpiler - Modifies the IL code of the method</p> <p><code class="language-plaintext highlighter-rouge">[HarmonyTranspiler]</code></p> <p>These patches directly modify the method’s instructions, allowing for complex modifications.</p> </li> <li> <p>Finalizer - Handles exceptions in the original method</p> <p><code class="language-plaintext highlighter-rouge">[HarmonyFinalizer]</code></p> <p>These patches run in a finally block and are useful for cleanup or exception handling.</p> <p>Example:</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="p">[</span><span class="nf">HarmonyPatch</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">GameClass</span><span class="p">),</span> <span class="s">"MethodName"</span><span class="p">)]</span>
 <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">FinalizerExample</span>
 <span class="p">{</span>
     <span class="p">[</span><span class="n">HarmonyFinalizer</span><span class="p">]</span>
     <span class="k">public</span> <span class="k">static</span> <span class="n">Exception</span> <span class="nf">HandleException</span><span class="p">(</span><span class="n">Exception</span> <span class="n">__exception</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="n">__exception</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
         <span class="p">{</span>
             <span class="n">Plugin</span><span class="p">.</span><span class="n">Logger</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"An error occurred: </span><span class="p">{</span><span class="n">__exception</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
             <span class="k">return</span> <span class="k">null</span><span class="p">;</span> <span class="c1">// Suppress the exception</span>
         <span class="p">}</span>
         <span class="k">return</span> <span class="n">__exception</span><span class="p">;</span> <span class="c1">// Let the exception propagate</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>Reverse Patch - Allows calling the original method implementation</p> <p><code class="language-plaintext highlighter-rouge">[HarmonyReversePatch]</code></p> <p>These patches let you call private/internal methods of the original class.</p> <p>Example:</p> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="p">[</span><span class="nf">HarmonyPatch</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">OriginalClass</span><span class="p">))]</span>
 <span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">ReversePatchExample</span>
 <span class="p">{</span>
     <span class="p">[</span><span class="n">HarmonyReversePatch</span><span class="p">]</span>
     <span class="p">[</span><span class="nf">HarmonyPatch</span><span class="p">(</span><span class="s">"PrivateMethod"</span><span class="p">)]</span>
     <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">CallPrivateMethod</span><span class="p">(</span><span class="kt">object</span> <span class="n">instance</span><span class="p">,</span> <span class="kt">string</span> <span class="n">parameter</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="c1">// This is a stub - Harmony will implement the actual method</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
     <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div> </div> </li> </ol> <p>You can learn more about Patching <a href="https://harmony.pardeike.net/articles/patching.html">here</a>.</p> <h2 id="patching-the-game"> <a href="#patching-the-game" class="anchor-heading" aria-labelledby="patching-the-game"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Patching the Game </h2> <p>So now you’re probably wondering how to patch other systems in the game. Well, there are an absolute ton of systems in the game. And a lot of the challenge in modding V Rising is finding the right system to patch and extracting the right data from the System to modify, remove, or add to.</p> <p>Here are some different examples of patching systems in V Rising.</p> <ul> <li><a href="https://github.com/CrimsonMods/CrimsonChatFilter/blob/master/Hooks/ChatHook.cs">CrimsonChatFilter - ChatMessageSystem</a></li> <li><a href="https://github.com/CrimsonMods/CrimsonMoon/blob/master/Hooks/Sacrafice.cs">CrimsonMoon - DropItemThrowSystem</a></li> <li><a href="https://github.com/Odjit/KindredCommands/blob/main/Patches/RevealMapPatches.cs">KindredCommands - ServerBootstrapSystem</a></li> <li><a href="https://github.com/CrimsonMods/OfflineRaidGuard/blob/master/Hooks/StatChange.cs">OfflineRaidGuard - DealDamageSystem</a></li> </ul> <p>Next <a href="/dev/tutorials/SampleTutorial/07_sample_services.html">What are Services?</a></p> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> Wiki maintained by <a href="https://github.com/CrimsonMods/">CrimsonMods</a> and other <a href="https://github.com/CrimsonMods/VRising-Modding/graphs/contributors">contributors</a>. <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/crimsonmods/vrising-modding/edit/main/dev/tutorials/SampleTutorial/06_sample_patch.md" id="edit-this-page">Edit this page on GitHub.</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
